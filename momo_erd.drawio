<mxfile host="app.diagrams.net">
  <diagram name="MoMo ERD" id="momo_sms_erd">
    <mxGraphModel dx="700" dy="600" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="700" pageHeight="600" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1"/>

        <!-- USERS -->
        <mxCell id="users" value=" Users&#xa;-----&#xa;user_id (PK)&#xa;name&#xa;phone&#xa;national_id" style="shape=rectangle;rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F4F8;" vertex="1">
          <mxGeometry x="50" y="80" width="160" height="120" as="geometry"/>
        </mxCell>

        <!-- TRANSACTIONS -->
        <mxCell id="transactions" value=" Transactions&#xa;----------&#xa;transaction_id (PK)&#xa;code&#xa;amount&#xa;status&#xa;sender_id (FK)&#xa;receiver_id (FK)&#xa;category_id (FK)" style="shape=rectangle;rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF4E6;" vertex="1">
          <mxGeometry x="280" y="60" width="180" height="160" as="geometry"/>
        </mxCell>

        <!-- TRANSACTION CATEGORIES -->
        <mxCell id="categories" value=" Categories&#xa;-----&#xa;category_id (PK)&#xa;name&#xa;desc" style="shape=rectangle;rounded=0;whiteSpace=wrap;html=1;fillColor=#F0F4E8;" vertex="1">
          <mxGeometry x="530" y="80" width="140" height="110" as="geometry"/>
        </mxCell>

        <!-- SYSTEM LOGS -->
        <mxCell id="logs" value=" Logs&#xa;-----&#xa;log_id (PK)&#xa;timestamp&#xa;level&#xa;message" style="shape=rectangle;rounded=0;whiteSpace=wrap;html=1;fillColor=#F5E8F8;" vertex="1">
          <mxGeometry x="280" y="280" width="140" height="110" as="geometry"/>
        </mxCell>

        <!-- TAGS -->
        <mxCell id="tags" value=" Tags&#xa;-----&#xa;tag_id (PK)&#xa;name" style="shape=rectangle;rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F8F4;" vertex="1">
          <mxGeometry x="530" y="280" width="120" height="90" as="geometry"/>
        </mxCell>

        <!-- TRANSACTION TAGS (JUNCTION) -->
        <mxCell id="trx_tags" value="Transaction&#xa;Tags&#xa;-------&#xa;transaction_id&#xa;tag_id" style="shape=rectangle;rounded=0;whiteSpace=wrap;html=1;fillColor=#F8F4E8;" vertex="1">
          <mxGeometry x="420" y="190" width="110" height="100" as="geometry"/>
        </mxCell>

        <!-- RELATIONSHIPS -->

        <!-- Users sender_id -->
        <mxCell id="rel1" edge="1" value="sends" style="endArrow=block;html=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="120" as="sourcePoint"/>
            <mxPoint x="280" y="120" as="targetPoint"/>
          </mxGeometry>
          <mxCell source="users" target="transactions"/>
        </mxCell>

        <!-- Users receiver_id -->
        <mxCell id="rel2" edge="1" value="receives" style="endArrow=block;html=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="150" as="sourcePoint"/>
            <mxPoint x="280" y="150" as="targetPoint"/>
          </mxGeometry>
          <mxCell source="users" target="transactions"/>
        </mxCell>

        <!-- Transactions to Categories -->
        <mxCell id="rel3" edge="1" value="has" style="endArrow=block;html=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="460" y="100" as="sourcePoint"/>
            <mxPoint x="530" y="100" as="targetPoint"/>
          </mxGeometry>
          <mxCell source="transactions" target="categories"/>
        </mxCell>

        <!-- Transactions to Logs -->
        <mxCell id="rel4" edge="1" value="logs" style="endArrow=block;html=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="350" y="220" as="sourcePoint"/>
            <mxPoint x="350" y="280" as="targetPoint"/>
          </mxGeometry>
          <mxCell source="transactions" target="logs"/>
        </mxCell>

        <!-- Transaction <-> Tags via junction -->
        <mxCell id="rel5" edge="1" value="tagged" style="endArrow=block;html=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="160" as="sourcePoint"/>
            <mxPoint x="430" y="190" as="targetPoint"/>
          </mxGeometry>
          <mxCell source="transactions" target="trx_tags"/>
        </mxCell>

        <mxCell id="rel6" edge="1" value="tagged" style="endArrow=block;html=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="530" y="280" as="sourcePoint"/>
            <mxPoint x="480" y="240" as="targetPoint"/>
          </mxGeometry>
          <mxCell source="tags" target="trx_tags"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
