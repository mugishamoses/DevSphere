{
  "title": "MoMo SMS System - JSON Data Schemas",
  "version": "1.0",
  "description": "JSON serialization examples for DevSphere database entities",
  "schemas": {
    "User": {
      "description": "User/Customer entity serialization",
      "example": {
        "user_id": 1,
        "phone_number": "250788123456",
        "full_name": "Jean Claude Mugabo",
        "email": "jc.mugabo@email.com",
        "account_balance": 50000.00,
        "registration_date": "2026-01-15T08:30:00Z",
        "status": "active",
        "created_at": "2026-01-15T08:30:00Z",
        "updated_at": "2026-01-25T14:45:00Z"
      }
    },
    "TransactionCategory": {
      "description": "Transaction category master data",
      "example": {
        "category_id": 1,
        "category_name": "Money Transfer",
        "description": "Person-to-person money transfer for personal payments",
        "fee_percentage": 1.50,
        "is_active": true,
        "created_at": "2026-01-10T10:00:00Z",
        "updated_at": "2026-01-10T10:00:00Z"
      }
    },
    "Transaction": {
      "description": "Basic transaction record",
      "example": {
        "transaction_id": 1,
        "sender_id": 1,
        "receiver_id": 2,
        "category_id": 1,
        "amount": 10000.00,
        "transaction_date": "2026-01-25T10:30:00Z",
        "status": "completed",
        "reference_number": "TXN20260125001",
        "notes": "Payment for services",
        "fee_amount": 150.00,
        "created_at": "2026-01-25T10:30:00Z",
        "updated_at": "2026-01-25T10:31:00Z"
      }
    },
    "SystemLog": {
      "description": "System audit log entry",
      "example": {
        "log_id": 1,
        "transaction_id": 1,
        "log_type": "TRANSACTION_COMPLETE",
        "log_message": "Transaction completed successfully",
        "severity": "info",
        "created_at": "2026-01-25T10:31:00Z"
      }
    },
    "UserCategoryPreference": {
      "description": "User preference for transaction categories (M:N junction)",
      "example": {
        "preference_id": 1,
        "user_id": 1,
        "category_id": 1,
        "preference_level": 1,
        "last_used_date": "2026-01-25T10:30:00Z",
        "usage_count": 5,
        "created_at": "2026-01-20T09:00:00Z",
        "updated_at": "2026-01-25T10:30:00Z"
      }
    },
    "CompleteTransactionDetails": {
      "description": "Complex nested JSON representing complete transaction with all related data (API Response)",
      "example": {
        "transaction_id": 1,
        "reference_number": "TXN20260125001",
        "transaction_type": "Money Transfer",
        "amount": 10000.00,
        "status": "completed",
        "transaction_date": "2026-01-25T10:30:00Z",
        "sender": {
          "user_id": 1,
          "full_name": "Jean Claude Mugabo",
          "phone_number": "250788123456",
          "email": "jc.mugabo@email.com",
          "current_balance_before": 50000.00,
          "current_balance_after": 39850.00
        },
        "receiver": {
          "user_id": 2,
          "full_name": "Marie Grace Uwera",
          "phone_number": "250788234567",
          "email": "mg.uwera@email.com",
          "current_balance_before": 125000.00,
          "current_balance_after": 135000.00
        },
        "category": {
          "category_id": 1,
          "category_name": "Money Transfer",
          "description": "Person-to-person money transfer for personal payments",
          "fee_percentage": 1.50
        },
        "fee": {
          "fee_amount": 150.00,
          "fee_calculation": "10000 * (1.50 / 100)",
          "fee_recipient": "MoMo System"
        },
        "notes": "Payment for services",
        "metadata": {
          "created_at": "2026-01-25T10:30:00Z",
          "updated_at": "2026-01-25T10:31:00Z",
          "processing_time_ms": 1250,
          "ip_address": "192.168.1.100",
          "device_type": "SMS"
        }
      }
    },
    "UserTransactionSummary": {
      "description": "User summary with transaction history (API Response)",
      "example": {
        "user_id": 1,
        "full_name": "Jean Claude Mugabo",
        "phone_number": "250788123456",
        "email": "jc.mugabo@email.com",
        "account_balance": 39850.00,
        "status": "active",
        "registration_date": "2026-01-15T08:30:00Z",
        "transaction_summary": {
          "total_transactions_sent": 3,
          "total_transactions_received": 2,
          "total_amount_sent": 17000.00,
          "total_amount_received": 5000.00,
          "total_fees_paid": 225.00,
          "net_balance_change": -12000.00
        },
        "recent_transactions": [
          {
            "transaction_id": 7,
            "reference_number": "TXN20260125007",
            "transaction_type": "SENT",
            "other_party": "Eric Nsabimana",
            "category": "Airtime Purchase",
            "amount": 2000.00,
            "status": "completed",
            "transaction_date": "2026-01-25T09:15:00Z"
          },
          {
            "transaction_id": 1,
            "reference_number": "TXN20260125001",
            "transaction_type": "SENT",
            "other_party": "Marie Grace Uwera",
            "category": "Money Transfer",
            "amount": 10000.00,
            "status": "completed",
            "transaction_date": "2026-01-25T10:30:00Z"
          },
          {
            "transaction_id": 5,
            "reference_number": "TXN20260125005",
            "transaction_type": "RECEIVED",
            "other_party": "Patrick Habimana",
            "category": "Money Transfer",
            "amount": 5000.00,
            "status": "completed",
            "transaction_date": "2026-01-25T13:30:00Z"
          }
        ]
      }
    },
    "DailyTransactionReport": {
      "description": "Daily analytics summary (API Response)",
      "example": {
        "report_date": "2026-01-25",
        "summary": {
          "total_transactions": 8,
          "completed_transactions": 7,
          "pending_transactions": 1,
          "failed_transactions": 0,
          "total_volume": 149000.00,
          "total_fees": 1890.00
        },
        "by_category": [
          {
            "category_name": "Money Transfer",
            "transaction_count": 5,
            "total_amount": 85000.00,
            "total_fees": 1275.00,
            "completed": 5,
            "pending": 0,
            "failed": 0
          },
          {
            "category_name": "Merchant Payment",
            "transaction_count": 1,
            "total_amount": 50000.00,
            "total_fees": 500.00,
            "completed": 1,
            "pending": 0,
            "failed": 0
          },
          {
            "category_name": "Airtime Purchase",
            "transaction_count": 1,
            "total_amount": 2000.00,
            "total_fees": 0.00,
            "completed": 1,
            "pending": 0,
            "failed": 0
          },
          {
            "category_name": "Bill Payment",
            "transaction_count": 1,
            "total_amount": 12000.00,
            "total_fees": 90.00,
            "completed": 1,
            "pending": 0,
            "failed": 0
          }
        ]
      }
    },
    "APIResponseFormat": {
      "description": "Standard API response wrapper",
      "example": {
        "success": true,
        "status_code": 200,
        "message": "Transaction retrieved successfully",
        "timestamp": "2026-01-25T10:35:00Z",
        "data": {
          "transaction_id": 1,
          "reference_number": "TXN20260125001",
          "sender": {
            "user_id": 1,
            "full_name": "Jean Claude Mugabo",
            "phone_number": "250788123456"
          },
          "receiver": {
            "user_id": 2,
            "full_name": "Marie Grace Uwera",
            "phone_number": "250788234567"
          },
          "amount": 10000.00,
          "status": "completed"
        },
        "pagination": {
          "page": 1,
          "page_size": 20,
          "total_records": 150,
          "total_pages": 8
        }
      }
    },
    "ErrorResponse": {
      "description": "Standard error response",
      "example": {
        "success": false,
        "status_code": 400,
        "error_code": "INSUFFICIENT_BALANCE",
        "message": "Sender has insufficient balance to complete transaction",
        "details": {
          "required_amount": 10150.00,
          "available_balance": 5000.00,
          "shortage": 5150.00
        },
        "timestamp": "2026-01-25T10:40:00Z",
        "request_id": "req_12345_abcde"
      }
    }
  },
  "sql_to_json_mapping": {
    "Users_Table": {
      "sql_columns": ["user_id", "phone_number", "full_name", "email", "account_balance", "registration_date", "status", "created_at", "updated_at"],
      "json_fields": ["user_id", "phone_number", "full_name", "email", "account_balance", "registration_date", "status", "created_at", "updated_at"],
      "serialization_notes": "Direct 1:1 mapping for user entity"
    },
    "Transactions_Table": {
      "sql_columns": ["transaction_id", "sender_id", "receiver_id", "category_id", "amount", "transaction_date", "status", "reference_number", "notes", "fee_amount", "created_at", "updated_at"],
      "json_structure": "Nested with related User and Category objects for API responses",
      "serialization_notes": "Transaction table joined with Users and Transaction_Categories to create complex nested JSON"
    },
    "Complete_Transaction_Example": {
      "sql_source": "SELECT t.* FROM Transactions t JOIN Users u1 JOIN Users u2 JOIN Transaction_Categories tc",
      "json_nesting": "Transaction > [Sender (User), Receiver (User), Category, Fee (calculated), Metadata]",
      "serialization_notes": "Demonstrates many-to-one relationships through object nesting"
    },
    "Many_To_Many_Relationship": {
      "sql_tables": ["User_Category_Preferences", "Users", "Transaction_Categories"],
      "json_representation": "User { preferences: [{ category_id, category_name, preference_level, usage_count }] }",
      "serialization_notes": "Junction table serialized as nested array within parent object"
    }
  }
}
